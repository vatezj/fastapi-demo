# APPæ¨¡å— - æ¨¡å—åŒ–æ¶æ„è®¾è®¡

## ğŸ“± æ¨¡å—æ¦‚è¿°

APPæ¨¡å—æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„FastAPIåº”ç”¨ï¼Œä¸“é—¨ä¸ºç§»åŠ¨ç«¯APPæä¾›æœåŠ¡ã€‚è¯¥æ¨¡å—é‡‡ç”¨äº†æ¨¡å—åŒ–è®¾è®¡ï¼Œæ—¢å¯ä»¥ä¸ºç§»åŠ¨ç«¯ç”¨æˆ·æä¾›æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä¸ºåå°ç®¡ç†ç³»ç»Ÿæä¾›ç®¡ç†æ¥å£ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### æ¨¡å—ç»“æ„
```
module_app/
â”œâ”€â”€ app.py                          # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ controller/                     # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ auth_controller.py         # è®¤è¯æ§åˆ¶å™¨ï¼ˆç§»åŠ¨ç«¯ï¼‰
â”‚   â”œâ”€â”€ user_controller.py         # ç”¨æˆ·æ§åˆ¶å™¨ï¼ˆç§»åŠ¨ç«¯ï¼‰
â”‚   â”œâ”€â”€ app_user_controller.py     # APPç”¨æˆ·æ§åˆ¶å™¨ï¼ˆç§»åŠ¨ç«¯ï¼‰
â”‚   â””â”€â”€ admin_interface_controller.py  # åå°ç®¡ç†æ¥å£æ§åˆ¶å™¨
â”œâ”€â”€ service/                        # æœåŠ¡å±‚
â”œâ”€â”€ dao/                           # æ•°æ®è®¿é—®å±‚
â””â”€â”€ entity/                        # å®ä½“å±‚
```

### æ¥å£åˆ†ç±»

#### 1. ç§»åŠ¨ç«¯æ¥å£ (`/app/v1/*`)
- **è®¤è¯æ¥å£**: `/app/v1/auth/*` - ç™»å½•ã€æ³¨å†Œã€çŸ­ä¿¡éªŒè¯ç­‰
- **ç”¨æˆ·æ¥å£**: `/app/v1/user/*` - ç”¨æˆ·ä¿¡æ¯ã€ä¸ªäººèµ„æ–™ç­‰
- **APPç”¨æˆ·æ¥å£**: `/app/v1/user/*` - ç”¨æˆ·ç®¡ç†ã€çŠ¶æ€ä¿®æ”¹ç­‰

#### 2. åå°ç®¡ç†æ¥å£ (`/app/v1/admin/*`)
- **ç”¨æˆ·ç®¡ç†**: `/app/v1/admin/user/*` - ç”¨æˆ·CRUDã€çŠ¶æ€ç®¡ç†ã€å¯†ç é‡ç½®ç­‰
- **ç™»å½•æ—¥å¿—**: `/app/v1/admin/login-log/*` - ç™»å½•æ—¥å¿—æŸ¥è¯¢ã€æ¸…ç©ºç­‰
- **ç»Ÿè®¡ä¿¡æ¯**: `/app/v1/admin/stats/*` - ç”¨æˆ·ç»Ÿè®¡ã€æ¦‚è§ˆä¿¡æ¯ç­‰

## ğŸ”Œ æ¥å£è¯¦æƒ…

### ç§»åŠ¨ç«¯æ¥å£

#### è®¤è¯æ¥å£
- `POST /app/v1/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /app/v1/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /app/v1/auth/send-sms` - å‘é€çŸ­ä¿¡éªŒè¯ç 

#### ç”¨æˆ·æ¥å£
- `GET /app/v1/user/profile` - è·å–ç”¨æˆ·èµ„æ–™
- `PUT /app/v1/user/profile` - æ›´æ–°ç”¨æˆ·èµ„æ–™
- `PUT /app/v1/user/password` - ä¿®æ”¹å¯†ç 

#### APPç”¨æˆ·æ¥å£
- `GET /app/v1/user/list` - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- `GET /app/v1/user/{user_id}` - è·å–ç”¨æˆ·è¯¦æƒ…
- `POST /app/v1/user/add` - æ–°å¢ç”¨æˆ·
- `PUT /app/v1/user/edit` - ç¼–è¾‘ç”¨æˆ·
- `DELETE /app/v1/user/delete` - åˆ é™¤ç”¨æˆ·
- `PUT /app/v1/user/status` - ä¿®æ”¹ç”¨æˆ·çŠ¶æ€
- `PUT /app/v1/user/reset-password` - é‡ç½®å¯†ç 

### åå°ç®¡ç†æ¥å£

#### ç”¨æˆ·ç®¡ç†
- `GET /app/v1/admin/user/list` - è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- `GET /app/v1/admin/user/{user_id}` - è·å–ç”¨æˆ·è¯¦æƒ…
- `POST /app/v1/admin/user/add` - æ–°å¢ç”¨æˆ·
- `PUT /app/v1/admin/user/edit` - ç¼–è¾‘ç”¨æˆ·
- `DELETE /app/v1/admin/user/delete` - åˆ é™¤ç”¨æˆ·
- `PUT /app/v1/admin/user/status` - ä¿®æ”¹ç”¨æˆ·çŠ¶æ€
- `PUT /app/v1/admin/user/reset-password` - é‡ç½®å¯†ç 

#### ç™»å½•æ—¥å¿—ç®¡ç†
- `GET /app/v1/admin/login-log/list` - è·å–ç™»å½•æ—¥å¿—åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- `DELETE /app/v1/admin/login-log/clear` - æ¸…ç©ºç™»å½•æ—¥å¿—

#### ç»Ÿè®¡ä¿¡æ¯
- `GET /app/v1/admin/stats/overview` - è·å–ç»Ÿè®¡æ¦‚è§ˆ

## ğŸ” æƒé™æ§åˆ¶

### ç§»åŠ¨ç«¯æ¥å£
- æ— éœ€ç‰¹æ®Šæƒé™ï¼Œé¢å‘æ™®é€šç”¨æˆ·
- éƒ¨åˆ†æ¥å£éœ€è¦ç”¨æˆ·ç™»å½•çŠ¶æ€

### åå°ç®¡ç†æ¥å£
- éœ€è¦åå°ç®¡ç†ç³»ç»Ÿæƒé™
- å»ºè®®é›†æˆåˆ°ç°æœ‰çš„æƒé™ç³»ç»Ÿä¸­
- å¯ä»¥é€šè¿‡ä¸­é—´ä»¶è¿›è¡Œæƒé™éªŒè¯

## ğŸ“Š æ•°æ®æ¨¡å‹

#### æ¨¡å—å†…éƒ¨å®ä½“
- `AppUser` - APPç”¨æˆ·å®ä½“
- `AppUserProfile` - ç”¨æˆ·èµ„æ–™å®ä½“
- `AppLoginLog` - ç™»å½•æ—¥å¿—å®ä½“

#### æ•°æ®ä¼ è¾“å¯¹è±¡
- `AppAddUserModel` - æ–°å¢ç”¨æˆ·æ¨¡å‹
- `AppEditUserModel` - ç¼–è¾‘ç”¨æˆ·æ¨¡å‹
- `AppUserPageQueryModel` - ç”¨æˆ·åˆ†é¡µæŸ¥è¯¢æ¨¡å‹
- `AppLoginLogPageQueryModel` - ç™»å½•æ—¥å¿—åˆ†é¡µæŸ¥è¯¢æ¨¡å‹

## ğŸš€ ä½¿ç”¨æ–¹å¼

### 1. ç§»åŠ¨ç«¯è°ƒç”¨
```javascript
// ç”¨æˆ·ç™»å½•
const response = await fetch('/app/v1/auth/login', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        user_name: 'testuser',
        password: 'password123'
    })
});
```

### 2. åå°ç®¡ç†è°ƒç”¨
```javascript
// è·å–ç”¨æˆ·åˆ—è¡¨
const response = await fetch('/app/v1/admin/user/list?page_num=1&page_size=10', {
    method: 'GET',
    headers: { 'Authorization': 'Bearer your-token' }
});
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
- `APP_NAME` - åº”ç”¨åç§°
- `APP_VERSION` - åº”ç”¨ç‰ˆæœ¬
- `APP_ROOT_PATH` - åº”ç”¨æ ¹è·¯å¾„

### æ•°æ®åº“é…ç½®
- ä½¿ç”¨å…±äº«çš„æ•°æ®åº“è¿æ¥
- æ”¯æŒMySQLå’ŒPostgreSQL

### Redisé…ç½®
- ä½¿ç”¨å…±äº«çš„Redisè¿æ¥
- æ”¯æŒç¼“å­˜å’Œä¼šè¯ç®¡ç†

## ğŸ“ å¼€å‘è§„èŒƒ

### 1. æ¥å£å‘½å
- ç§»åŠ¨ç«¯æ¥å£ä½¿ç”¨ç®€æ´çš„RESTfulé£æ ¼
- åå°ç®¡ç†æ¥å£æ·»åŠ `/admin`å‰ç¼€
- ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼

### 2. é”™è¯¯å¤„ç†
- ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•
- å‹å¥½çš„é”™è¯¯ä¿¡æ¯è¿”å›

### 3. æ—¥å¿—è®°å½•
- æ“ä½œæ—¥å¿—è®°å½•
- é”™è¯¯æ—¥å¿—è®°å½•
- æ€§èƒ½ç›‘æ§æ—¥å¿—

## ğŸ”„ æ‰©å±•æ€§

### 1. æ–°å¢åŠŸèƒ½æ¨¡å—
- åœ¨`controller`ç›®å½•ä¸‹æ·»åŠ æ–°çš„æ§åˆ¶å™¨
- åœ¨`service`ç›®å½•ä¸‹æ·»åŠ å¯¹åº”çš„æœåŠ¡
- åœ¨`app.py`ä¸­æ³¨å†Œæ–°çš„è·¯ç”±

### 2. æƒé™æ‰©å±•
- å¯ä»¥é›†æˆç°æœ‰çš„æƒé™ç³»ç»Ÿ
- æ”¯æŒè§’è‰²å’Œæƒé™çš„ç»†ç²’åº¦æ§åˆ¶
- æ”¯æŒæ•°æ®æƒé™æ§åˆ¶

### 3. ç›‘æ§æ‰©å±•
- æ”¯æŒæ€§èƒ½ç›‘æ§
- æ”¯æŒä¸šåŠ¡æŒ‡æ ‡ç›‘æ§
- æ”¯æŒå‘Šè­¦æœºåˆ¶

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [APIæ¥å£æ–‡æ¡£](./docs/api.md)
- [æ•°æ®åº“è®¾è®¡æ–‡æ¡£](./docs/database.md)
- [éƒ¨ç½²æŒ‡å—](./docs/deployment.md)
- [æµ‹è¯•æŒ‡å—](./docs/testing.md)
